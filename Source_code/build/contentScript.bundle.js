(()=>{var e={79:()=>{!function(e,t,n){"use strict";function r(e,t,n){i.addMethod(t,n,e.unbindEvent),i.addMethod(t,n,e.unbindEventWithSelectorOrCallback),i.addMethod(t,n,e.unbindEventWithSelectorAndCallback)}function o(e){e.arrive=u.bindEvent,r(u,e,"unbindArrive"),e.leave=s.bindEvent,r(s,e,"unbindLeave")}if(e.MutationObserver&&"undefined"!=typeof HTMLElement){var c=0,i=function(){var t=HTMLElement.prototype.matches||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector;return{matchesSelector:function(e,n){return e instanceof HTMLElement&&t.call(e,n)},addMethod:function(e,t,r){var o=e[t];e[t]=function(){return r.length==arguments.length?r.apply(this,arguments):"function"==typeof o?o.apply(this,arguments):n}},callCallbacks:function(e,t){t&&t.options.onceOnly&&1==t.firedElems.length&&(e=[e[0]]);for(var n,r=0;n=e[r];r++)n&&n.callback&&n.callback.call(n.elem,n.elem);t&&t.options.onceOnly&&1==t.firedElems.length&&t.me.unbindEventWithSelectorAndCallback.call(t.target,t.selector,t.callback)},checkChildNodesRecursively:function(e,t,n,r){for(var o,c=0;o=e[c];c++)n(o,t,r)&&r.push({callback:t.callback,elem:o}),o.childNodes.length>0&&i.checkChildNodesRecursively(o.childNodes,t,n,r)},mergeArrays:function(e,t){var n,r={};for(n in e)e.hasOwnProperty(n)&&(r[n]=e[n]);for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);return r},toElementsArray:function(t){return n===t||"number"==typeof t.length&&t!==e||(t=[t]),t}}}(),l=function(){var e=function(){this._eventsBucket=[],this._beforeAdding=null,this._beforeRemoving=null};return e.prototype.addEvent=function(e,t,n,r){var o={target:e,selector:t,options:n,callback:r,firedElems:[]};return this._beforeAdding&&this._beforeAdding(o),this._eventsBucket.push(o),o},e.prototype.removeEvent=function(e){for(var t,n=this._eventsBucket.length-1;t=this._eventsBucket[n];n--)if(e(t)){this._beforeRemoving&&this._beforeRemoving(t);var r=this._eventsBucket.splice(n,1);r&&r.length&&(r[0].callback=null)}},e.prototype.beforeAdding=function(e){this._beforeAdding=e},e.prototype.beforeRemoving=function(e){this._beforeRemoving=e},e}(),a=function(t,r){var o=new l,c=this,a={fireOnAttributesModification:!1};return o.beforeAdding((function(n){var o,i=n.target;(i===e.document||i===e)&&(i=document.getElementsByTagName("html")[0]),o=new MutationObserver((function(e){r.call(this,e,n)}));var l=t(n.options);o.observe(i,l),n.observer=o,n.me=c})),o.beforeRemoving((function(e){e.observer.disconnect()})),this.bindEvent=function(e,t,n){t=i.mergeArrays(a,t);for(var r=i.toElementsArray(this),c=0;c<r.length;c++)o.addEvent(r[c],e,t,n)},this.unbindEvent=function(){var e=i.toElementsArray(this);o.removeEvent((function(t){for(var r=0;r<e.length;r++)if(this===n||t.target===e[r])return!0;return!1}))},this.unbindEventWithSelectorOrCallback=function(e){var t,r=i.toElementsArray(this),c=e;t="function"==typeof e?function(e){for(var t=0;t<r.length;t++)if((this===n||e.target===r[t])&&e.callback===c)return!0;return!1}:function(t){for(var o=0;o<r.length;o++)if((this===n||t.target===r[o])&&t.selector===e)return!0;return!1},o.removeEvent(t)},this.unbindEventWithSelectorAndCallback=function(e,t){var r=i.toElementsArray(this);o.removeEvent((function(o){for(var c=0;c<r.length;c++)if((this===n||o.target===r[c])&&o.selector===e&&o.callback===t)return!0;return!1}))},this},u=new function(){function e(e,t){return!(!i.matchesSelector(e,t.selector)||(e._id===n&&(e._id=c++),-1!=t.firedElems.indexOf(e._id)))&&(t.firedElems.push(e._id),!0)}var t={fireOnAttributesModification:!1,onceOnly:!1,existing:!1};u=new a((function(e){var t={attributes:!1,childList:!0,subtree:!0};return e.fireOnAttributesModification&&(t.attributes=!0),t}),(function(t,n){t.forEach((function(t){var r=t.addedNodes,o=t.target,c=[];null!==r&&r.length>0?i.checkChildNodesRecursively(r,n,e,c):"attributes"===t.type&&e(o,n)&&c.push({callback:n.callback,elem:o}),i.callCallbacks(c,n)}))}));var r=u.bindEvent;return u.bindEvent=function(e,o,c){n===c?(c=o,o=t):o=i.mergeArrays(t,o);var l=i.toElementsArray(this);if(o.existing){for(var a=[],u=0;u<l.length;u++)for(var s=l[u].querySelectorAll(e),f=0;f<s.length;f++)a.push({callback:c,elem:s[f]});if(o.onceOnly&&a.length)return c.call(a[0].elem,a[0].elem);setTimeout(i.callCallbacks,1,a)}r.call(this,e,o,c)},u},s=new function(){function e(e,t){return i.matchesSelector(e,t.selector)}var t={};s=new a((function(){return{childList:!0,subtree:!0}}),(function(t,n){t.forEach((function(t){var r=t.removedNodes,o=[];null!==r&&r.length>0&&i.checkChildNodesRecursively(r,n,e,o),i.callCallbacks(o,n)}))}));var r=s.bindEvent;return s.bindEvent=function(e,o,c){n===c?(c=o,o=t):o=i.mergeArrays(t,o),r.call(this,e,o,c)},s};t&&o(t.fn),o(HTMLElement.prototype),o(NodeList.prototype),o(HTMLCollection.prototype),o(HTMLDocument.prototype),o(Window.prototype);var f={};r(u,f,"unbindAllArrive"),r(s,f,"unbindAllLeave")}}(window,"undefined"==typeof jQuery?null:jQuery,void 0)}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var c=t[r]={exports:{}};return e[r](c,c.exports,n),c.exports}(()=>{"use strict";n(79);function e(e,t){return void 0===t&&(t=0),new Promise((function(n){document.arrive(e,(function(){var r=document.querySelectorAll(e);console.log("Element arrived:",r.length),r.length>t&&n(r[t])}))}))}var t=function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)},r=function(e,t,n,r){return new(n||(n=Promise))((function(o,c){function i(e){try{a(r.next(e))}catch(e){c(e)}}function l(e){try{a(r.throw(e))}catch(e){c(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,l)}a((r=r.apply(e,t||[])).next())}))},o=function(e,t){var n,r,o,c,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return c={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(c[Symbol.iterator]=function(){return this}),c;function l(l){return function(a){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;c&&(c=0,l[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&l[0]?r.return:l[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,l[1])).done)return o;switch(r=0,o&&(l=[2&l[0],o.value]),l[0]){case 0:case 1:o=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,r=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==l[0]&&2!==l[0])){i=0;continue}if(3===l[0]&&(!o||l[1]>o[0]&&l[1]<o[3])){i.label=l[1];break}if(6===l[0]&&i.label<o[1]){i.label=o[1],o=l;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(l);break}o[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(e){l=[6,e],r=0}finally{n=o=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,a])}}},c=function(e){return new Promise((function(t){return setTimeout(t,e)}))},i=function(e,t){return Math.floor(Math.random()*(t-e+1)+e)};window.location.href.includes("youtube.com/watch")&&r(void 0,void 0,void 0,(function(){var t,n,l,a,u,s,f,d,h,v,m;return o(this,(function(b){switch(b.label){case 0:return b.trys.push([0,12,,13]),[4,chrome.storage.local.get(["youtubeAutoComment"])];case 1:return t=b.sent(),n=t.youtubeAutoComment||{},l=n.active,a=n.comments,u=n.minTime,s=n.maxTime,l&&(null==a?void 0:a.length)?(e("#subscribe-button-shape"),[4,c(1e3)]):(console.log("Auto comment is not active or no comments available"),[2]);case 2:return b.sent(),window.scrollBy(0,500),[4,c(i(1e3,2e3))];case 3:return b.sent(),e("#placeholder-area"),[4,c(3e3)];case 4:return b.sent(),window.scrollBy(0,500),[4,c(i(1e3,2e3))];case 5:return b.sent(),null==(f=document.querySelector("#placeholder-area"))||f.dispatchEvent(new Event("click",{bubbles:!0})),null==f||f.dispatchEvent(new Event("focus",{bubbles:!0})),[4,c(i(1e3,2e3))];case 6:return b.sent(),d=document.querySelector('[role="textbox"]'),h=a[Math.floor(Math.random()*a.length)],console.log("Posting comment:",h),d?(document.execCommand("insertText",!1,h),[4,c(i(1e3*Number(u),1e3*Number(s)))]):(console.error("Comment input not found"),[2]);case 7:return b.sent(),(v=document.querySelector("#submit-button"))?(v.click(),[4,c(1e3)]):[3,11];case 8:return b.sent(),[4,(y=h,r(void 0,void 0,void 0,(function(){var e,t,n,r;return o(this,(function(o){switch(o.label){case 0:return[4,chrome.storage.local.get(["youtubeAutoComment"])];case 1:return e=o.sent(),t=e.youtubeAutoComment||{},n=t.comments||[],r=n.filter((function(e){return e!==y})),t.comments=r,[4,chrome.storage.local.set({youtubeAutoComment:t})];case 2:return o.sent(),[2]}}))})))];case 9:return b.sent(),[4,i(1e3,2e3)];case 10:b.sent(),chrome.runtime.sendMessage({action:"removeTab"}),b.label=11;case 11:return[3,13];case 12:return m=b.sent(),console.error("Auto comment error:",m),[3,13];case 13:return[2]}var y}))})),chrome.runtime.onMessage.addListener((function(e,n,i){if("getLinks"===e.action){var l=e.data,a=l.keyword,u=l.count;console.log("Received message:",a,u);var s=parseInt(u,10)||0;if(!a||s<=0)return void console.error("Invalid keyword or count");!function(e,n){r(this,void 0,void 0,(function(){var i,l;return o(this,(function(a){switch(a.label){case 0:return i=document.querySelector('[name="search_query"]'),l=document.querySelector('[aria-label="Search"]'),i&&l?(i.dispatchEvent(new Event("click",{bubbles:!0})),i.dispatchEvent(new Event("focus",{bubbles:!0})),[4,c(1e3)]):(console.error("Search input or button not found"),[2]);case 1:return a.sent(),document.execCommand("insertText",!1,e),[4,c(1e3)];case 2:return a.sent(),l.click(),console.log("Searching for:",e),[4,c(2e3)];case 3:return a.sent(),function(e){r(this,void 0,void 0,(function(){var n,r,i;return o(this,(function(o){switch(o.label){case 0:n=new Set,r=0,o.label=1;case 1:return[4,c(2e3)];case 2:return o.sent(),Array.from(document.querySelectorAll("#dismissible > ytd-thumbnail a")).forEach((function(e){e.href&&e.href.trim().length>0&&n.add(e.href)})),i=Array.from(n),console.log("Found ".concat(i.length," links so far.")),i.length>=e||i.length===r?(function(e){var n="data:text/csv;charset=utf-8,Link\n";e.forEach((function(e){n+="".concat(e,"\n")}));var r=encodeURI(n),o=document.createElement("a");o.setAttribute("href",r),o.setAttribute("download","youtube_links.csv"),document.body.appendChild(o),o.click(),document.body.removeChild(o),chrome.storage.local.get(["youtubeLinksGet"],(function(e){var n=e.youtubeLinksGet||{};chrome.storage.local.set({youtubeLinksGet:t(t({},n),{active:!1})})}))}(i.slice(0,e)),[3,3]):(r=i.length,window.scrollTo(0,document.documentElement.scrollHeight),[3,1]);case 3:return[2]}}))}))}(n),[2]}}))}))}(a,s)}}))})()})();